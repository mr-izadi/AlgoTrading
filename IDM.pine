//@version=5
indicator("IDM Detector", overlay=true)

// Input parameters 
lookback = input.int(1, "Lookback Period", minval=1)

// Detect IDM patterns
bullish_idm = low < low[1] and close > math.max(open[1], close[1])
bearish_idm = high > high[1] and close < math.min(open[1], close[1])

// Plot IDM signals
if bullish_idm
    label.new(bar_index, low, "Bullish IDM", color=color.green, style=label.style_label_up, textcolor=color.white)
if bearish_idm
    label.new(bar_index, high, "Bearish IDM", color=color.red, style=label.style_label_down, textcolor=color.white)

// // Plot previous candle's body levels for reference
// plot(high[1], "Previous High", color=color.blue, style=plot.style_circles)
// plot(low[1], "Previous Low", color=color.orange, style=plot.style_circles)